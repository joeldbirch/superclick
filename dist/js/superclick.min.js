/*
 * jQuery Superclick Menu Plugin - v1.1.0
 * Copyright (c) 2014 Joel Birch
 *
 * Dual licensed under the MIT and GPL licenses:
 *	http://www.opensource.org/licenses/mit-license.php
 *	http://www.gnu.org/licenses/gpl.html
 */

;(function(t){"use strict";var s=function(){var s={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",menuArrowClass:"sf-arrows"},e=(function(){t(window).load(function(){t("body").children().on("click.superclick",function(){var s=t(".sf-js-enabled");s.superclick("reset")})})}(),function(t,e){var n=s.menuClass;e.cssArrows&&(n+=" "+s.menuArrowClass),t.toggleClass(n)}),n=function(e,n){return e.find("li."+n.pathClass).slice(0,n.pathLevels).addClass(n.activeClass+" "+s.bcClass).filter(function(){return t(this).children(n.popUpSelector).hide().show().length}).removeClass(n.pathClass)},i=function(t){t.children("a").toggleClass(s.anchorClass)},a=function(t){var s=t.css("ms-touch-action");s="pan-y"===s?"auto":"pan-y",t.css("ms-touch-action",s)},o=function(s){var e,n=t(this),i=n.siblings(s.data.popUpSelector);return i.length?(e=i.is(":hidden")?r:c,t.proxy(e,n.parent("li"))(),!1):void 0},r=function(){var s=t(this);h(s),s.siblings().superclick("hide").end().superclick("show")},c=function(){var s=t(this),e=h(s);t.proxy(l,s,e)()},l=function(s){s.retainPath=t.inArray(this[0],s.$path)>-1,this.superclick("hide"),this.parents("."+s.activeClass).length||(s.onIdle.call(p(this)),s.$path.length&&t.proxy(r,s.$path)())},p=function(t){return t.closest("."+s.menuClass)},h=function(t){return p(t).data("sf-options")};return{hide:function(s){if(this.length){var e=this,n=h(e);if(!n)return this;var i=n.retainPath===!0?n.$path:"",a=e.find("li."+n.activeClass).add(this).not(i).removeClass(n.activeClass).children(n.popUpSelector),o=n.speedOut;s&&(a.show(),o=0),n.retainPath=!1,n.onBeforeHide.call(a),a.stop(!0,!0).animate(n.animationOut,o,function(){var s=t(this);n.onHide.call(s)})}return this},show:function(){var t=h(this);if(!t)return this;var s=this.addClass(t.activeClass),e=s.children(t.popUpSelector);return t.onBeforeShow.call(e),e.stop(!0,!0).animate(t.animation,t.speed,function(){t.onShow.call(e)}),this},destroy:function(){return this.each(function(){var n,o=t(this),r=o.data("sf-options");return r?(n=o.find(r.popUpSelector).parent("li"),e(o,r),i(n),a(o),o.off(".superclick"),n.children(r.popUpSelector).attr("style",function(t,s){return s.replace(/display[^;]+;?/g,"")}),r.$path.removeClass(r.activeClass+" "+s.bcClass).addClass(r.pathClass),o.find("."+r.activeClass).removeClass(r.activeClass),r.onDestroy.call(o),o.removeData("sf-options"),void 0):!1})},reset:function(){return this.each(function(){var s=t(this),e=h(s),n=t(s.find("."+e.activeClass).toArray().reverse());n.children("a").trigger("click")})},init:function(r){return this.each(function(){var c=t(this);if(c.data("sf-options"))return!1;var l=t.extend({},t.fn.superclick.defaults,r),p=c.find(l.popUpSelector).parent("li");l.$path=n(c,l),c.data("sf-options",l),e(c,l),i(p),a(c),c.on("click.superclick","a",l,o),p.not("."+s.bcClass).superclick("hide",!0),l.onInit.call(this)})}}}();t.fn.superclick=function(e){return s[e]?s[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?t.error("Method "+e+" does not exist on jQuery.fn.superclick"):s.init.apply(this,arguments)},t.fn.superclick.defaults={popUpSelector:"ul,.sf-mega",activeClass:"sfHover",pathClass:"overrideThisToUse",pathLevels:1,animation:{opacity:"show"},animationOut:{opacity:"hide"},speed:"normal",speedOut:"fast",cssArrows:!0,onInit:t.noop,onBeforeShow:t.noop,onShow:t.noop,onBeforeHide:t.noop,onHide:t.noop,onIdle:t.noop,onDestroy:t.noop}})(jQuery);